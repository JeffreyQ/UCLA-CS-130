{"info": {"description": "Polly API", "version": "1.0", "title": "Polly API"}, "responses": {"ParseError": {"description": "When a mask can't be parsed"}, "MaskError": {"description": "When any error occurs on mask"}}, "securityDefinitions": {"Bearer Auth": {"in": "header", "name": "Authorization", "type": "apiKey"}}, "paths": {"/poll/": {"get": {"operationId": "list of polls created by user", "security": [{"Bearer Auth": []}], "responses": {"200": {"description": "Success", "schema": {"items": {"$ref": "#/definitions/Poll_Fields"}, "type": "array"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "tags": ["poll"]}, "post": {"operationId": "create a new poll (USE MULTIPLE CHOICE FOR SELECT ALL)", "responses": {"201": {"description": "Success", "schema": {"$ref": "#/definitions/Poll_Id"}}}, "parameters": [{"required": true, "name": "payload", "in": "body", "schema": {"$ref": "#/definitions/Create_Poll_Fields"}}, {"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "summary": "Creates a new Poll", "security": [{"Bearer Auth": []}], "tags": ["poll"]}}, "/poll/following": {"get": {"operationId": "list of polls user is following", "security": [{"Bearer Auth": []}], "responses": {"200": {"description": "Success", "schema": {"items": {"$ref": "#/definitions/Poll_Fields"}, "type": "array"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "tags": ["poll"]}}, "/poll/{poll_id}": {"parameters": [{"in": "path", "name": "poll_id", "required": true, "type": "string"}], "get": {"operationId": "Get a poll by poll_id", "responses": {"200": {"description": "Success", "schema": {"$ref": "#/definitions/Poll_Fields"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "summary": "Gets poll specified by poll_id", "security": [{"Bearer Auth": []}], "tags": ["poll"]}, "patch": {"operationId": "Update a poll's is_open status", "responses": {"200": {"description": "Poll successfully patched"}}, "parameters": [{"required": true, "name": "payload", "in": "body", "schema": {"$ref": "#/definitions/Update_Poll_Fields"}}], "summary": "Updates a Poll", "security": [{"Bearer Auth": []}], "tags": ["poll"]}}, "/poll/{poll_id}/responded": {"parameters": [{"in": "path", "name": "poll_id", "required": true, "type": "string"}], "get": {"operationId": "Has current user responded to poll", "security": [{"Bearer Auth": [""]}], "responses": {"200": {"description": "Success", "schema": {"$ref": "#/definitions/did_respond"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "tags": ["poll"]}}, "/poll/{poll_id}/response": {"parameters": [{"in": "path", "name": "poll_id", "required": true, "type": "string"}], "get": {"operationId": "Votes for each answer to a poll", "responses": {"200": {"description": "Success", "schema": {"$ref": "#/definitions/get_all_responses_poll"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "summary": "gets responses of poll at this id", "security": [{"Bearer Auth": [""]}], "tags": ["poll"]}, "post": {"operationId": "Vote for answer, comment optional", "responses": {"201": {"description": "Response successfully posted"}}, "parameters": [{"required": true, "name": "payload", "in": "body", "schema": {"$ref": "#/definitions/Response_Fields"}}], "summary": "post a response to given poll id", "security": [{"Bearer Auth": []}], "tags": ["poll"]}}, "/user/": {"get": {"operationId": "list_of_registered_users", "responses": {"200": {"description": "Success", "schema": {"items": {"$ref": "#/definitions/user_get"}, "type": "array"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "summary": "List all registered users", "security": [{"Bearer Auth": []}], "tags": ["user"]}, "post": {"operationId": "create a new user", "tags": ["user"], "responses": {"201": {"description": "Success", "schema": {"$ref": "#/definitions/user_create_response"}}}, "parameters": [{"required": true, "name": "payload", "in": "body", "schema": {"$ref": "#/definitions/user_create"}}], "summary": "Creates a new User"}}, "/user/confirm": {"post": {"operationId": "confirm a follow request", "responses": {"200": {"description": "Success"}}, "parameters": [{"required": true, "name": "payload", "in": "body", "schema": {"$ref": "#/definitions/user_follow_create"}}], "summary": "Confirms a follow request", "security": [{"Bearer Auth": []}], "tags": ["user"]}}, "/user/follow": {"post": {"operationId": "create a follow request", "responses": {"201": {"description": "Success", "schema": {"$ref": "#/definitions/create_follow_response"}}}, "parameters": [{"required": true, "name": "payload", "in": "body", "schema": {"$ref": "#/definitions/user_follow_create"}}], "summary": "Creates a follow request", "security": [{"Bearer Auth": []}], "tags": ["user"]}}, "/user/me": {"get": {"operationId": "get user details", "security": [{"Bearer Auth": []}], "responses": {"200": {"description": "Success"}}, "tags": ["user"]}}, "/user/me/invitedby": {"get": {"operationId": "get list of users that have invited current user to subscribe", "security": [{"Bearer Auth": []}], "responses": {"200": {"description": "Success", "schema": {"items": {"$ref": "#/definitions/invited_by_user"}, "type": "array"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "tags": ["user"]}}, "/user/me/subscribedto": {"get": {"operationId": "get people user is subscribed to", "responses": {"200": {"description": "Success", "schema": {"items": {"$ref": "#/definitions/get_subscribed_to"}, "type": "array"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "summary": "get people user is subscribed to", "security": [{"Bearer Auth": []}], "tags": ["user"]}}, "/user/me/subscribers": {"get": {"operationId": "get subscribers", "responses": {"200": {"description": "Success", "schema": {"items": {"$ref": "#/definitions/get_my_subscribers"}, "type": "array"}}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "summary": "get subscribers", "security": [{"Bearer Auth": []}], "tags": ["user"]}}, "/user/{public_id}": {"parameters": [{"in": "path", "description": "The User identifier", "name": "public_id", "required": true, "type": "string"}], "get": {"operationId": "get a user", "tags": ["user"], "responses": {"200": {"description": "Success", "schema": {"$ref": "#/definitions/user_get"}}, "404": {"description": "User not found."}}, "parameters": [{"in": "header", "description": "An optional fields mask", "name": "X-Fields", "type": "string", "format": "mask"}], "summary": "get a user given its identifier"}}}, "basePath": "/", "consumes": ["application/json"], "tags": [{"description": "user related operations", "name": "user"}, {"description": "poll related operations", "name": "poll"}], "swagger": "2.0", "definitions": {"Poll_Fields": {"required": ["form_type", "id", "is_open", "owner_id", "prompt"], "properties": {"resp_struct": {"$ref": "#/definitions/Response_Struct"}, "owner_id": {"description": "poll owner id", "type": "integer"}, "form_type": {"enum": ["multChoice", "numScale", "freeResp"], "description": "form type, use multChoice for True/False", "type": "string", "example": "multChoice"}, "is_open": {"description": "Status of whether poll is still open", "type": "boolean"}, "id": {"description": "poll id", "type": "integer"}, "prompt": {"description": "poll question prompt", "type": "string"}}, "type": "object"}, "Response_Struct": {"properties": {"high": {"description": "label for high value on scale", "type": "string"}, "options": {"items": {"type": "string"}, "description": "list of answer options. For True/False polls simply add [False, True] options", "type": "array"}, "low": {"description": "label for low value on scale", "type": "string"}}, "type": "object"}, "invited_by_user": {"properties": {"name": {"description": "name of user who sent invitation", "type": "string"}, "user_id": {"description": "id of user who sent invitation", "type": "integer"}}, "type": "object"}, "get_all_responses_poll": {"properties": {"responses": {"items": {"$ref": "#/definitions/single_responses"}, "type": "array"}, "aggregates": {"items": {"$ref": "#/definitions/Aggregated_Answers"}, "type": "array"}}, "type": "object"}, "Poll_Id": {"required": ["id"], "properties": {"id": {"description": "poll id", "type": "integer"}}, "type": "object"}, "user_create": {"required": ["accessToken"], "properties": {"accessToken": {"description": "facebook access token", "type": "string"}}, "type": "object"}, "Aggregated_Answers": {"properties": {"option": {"description": "answer value", "type": "integer"}, "votes": {"description": "number of counts for the corresponding answer value", "type": "integer"}}, "type": "object"}, "get_my_subscribers": {"properties": {"name": {"description": "name of your follower", "type": "string"}, "follower_id": {"description": "id of a follower", "type": "integer"}}, "type": "object"}, "Create_Poll_Fields": {"required": ["form_type", "prompt"], "properties": {"resp_struct": {"$ref": "#/definitions/Response_Struct"}, "prompt": {"description": "poll question prompt", "type": "string"}, "form_type": {"enum": ["multChoice", "numScale", "freeResp"], "description": "form type, use multChoice for True/False", "type": "string", "example": "multChoice"}}, "type": "object"}, "user_follow_create": {"required": ["id"], "properties": {"id": {"description": "id of the user to follow", "type": "integer"}}, "type": "object"}, "get_subscribed_to": {"properties": {"name": {"description": "name of who I am following", "type": "string"}, "user_id": {"description": "id of who I am following", "type": "integer"}}, "type": "object"}, "single_responses": {"properties": {"responder_id": {"description": "Id of the responder", "type": "integer"}, "created_date": {"description": "String formatted datetime", "type": "string"}, "answer": {"description": "option selected", "type": "integer"}, "poll_id": {"description": "The poll id", "type": "integer"}, "comment": {"description": "The responders comment", "type": "string"}, "id": {"description": "primary key ", "type": "integer"}}, "type": "object"}, "Response_Fields": {"required": ["option"], "properties": {"option": {"description": "integer value for answer", "type": "integer"}, "comment": {"description": "string value of comments", "type": "string"}}, "type": "object"}, "user_create_response": {"properties": {"token": {"type": "string"}}, "type": "object"}, "create_follow_response": {"properties": {"status": {"type": "string"}}, "type": "object"}, "user_get": {"required": ["fb_id", "id", "name"], "properties": {"email": {"description": "user email", "type": "string"}, "fb_id": {"description": "facebook id", "type": "string"}, "name": {"description": "name", "type": "string"}, "relationship_status": {"type": "string"}, "id": {"description": "user id", "type": "integer"}}, "type": "object"}, "Update_Poll_Fields": {"required": ["is_open"], "properties": {"is_open": {"description": "Status of whether poll is still open", "type": "boolean"}}, "type": "object"}, "did_respond": {"properties": {"responded": {"description": "has this user responded to the poll", "type": "boolean"}}, "type": "object"}}, "produces": ["application/json"]}